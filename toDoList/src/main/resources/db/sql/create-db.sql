DROP TABLE USUARIOS IF EXISTS CASCADE;
CREATE TABLE USUARIOS (
  ID 			INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  USUARIO 		VARCHAR(30),
  CLAVE 		VARCHAR(50),
  TIPO  		INTEGER,		/*	1 = admin | 2 = usuario */
  CONDICION 	VARCHAR(2)		/* 	Si | No */
);
ALTER TABLE USUARIOS ADD CONSTRAINT USUARIO_UNICO UNIQUE (USUARIO);

DROP TABLE TIPO_USUARIO IF EXISTS;
CREATE TABLE TIPO_USUARIO (
  ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  DESCRIPCION 	VARCHAR(30)
);
ALTER TABLE USUARIOS ADD CONSTRAINT ID_TIPO_USUARIO FOREIGN KEY (TIPO) REFERENCES TIPO_USUARIO(ID);

DROP TABLE TAREAS IF EXISTS CASCADE;
CREATE TABLE TAREAS (
  ID 			 INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  DESCRIPCION 	 VARCHAR(250),
  FECHA			 DATETIME,
  CREADOR_POR 	 INTEGER, 	/*	ID_USUARIO creador */
  MODIFICADO_POR INTEGER,
  IDESTADO  	 INTEGER,	/* 	1 = pendiente | 2 = completa |   */
  IDTIPO 		 INTEGER,		/*  1 = privada | 2 = publica */
  IDMODO 		 INTEGER /*1 = lectura | 2 = escritura*/
);

DROP TABLE TIPO_TAREA IF EXISTS CASCADE;
CREATE TABLE TIPO_TAREA (
  ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  DESCRIPCION 	VARCHAR(30)
);

DROP TABLE TIPO_ESTADO IF EXISTS CASCADE;
CREATE TABLE ESTADO_TAREA (
  ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  DESCRIPCION 	VARCHAR(30)		
);

DROP TABLE TIPO_MODO IF EXISTS CASCADE;
CREATE TABLE MODO_TAREA (
  ID 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  DESCRIPCION 	VARCHAR(30)		
);

ALTER TABLE TAREAS ADD CONSTRAINT ID_ESTADO FOREIGN KEY (IDESTADO) REFERENCES ESTADO_TAREA(ID);
ALTER TABLE TAREAS ADD CONSTRAINT ID_CREADOR FOREIGN KEY (CREADO_POR) REFERENCES USUARIOS(ID);
ALTER TABLE TAREAS ADD CONSTRAINT ID_MODIFICADOR FOREIGN KEY (MODIFICADO_POR) REFERENCES USUARIOS(ID);
ALTER TABLE TAREAS ADD CONSTRAINT ID_TIPO FOREIGN KEY (IDTIPO) REFERENCES TIPO_TAREA(ID);
ALTER TABLE TAREAS ADD CONSTRAINT ID_MODO FOREIGN KEY (IDMODO) REFERENCES MODO_TAREA(ID);